# 说说vue中，key的原理

## 参考答案

在Vue中，key是用于帮助Vue识别和跟踪虚拟DOM的变化的特殊属性。当Vue更新渲染真实DOM时，它使用key属性来比较新旧节点，并尽可能地复用已存在的真实DOM节点，以提高性能。  
Vue 在进行虚拟DOM的diff算法时，会使用key来匹配新旧节点，以确定节点的更新、移动或删除。它通过key属性来判断两个节点是否代码相同的实体，而不仅仅是根据它们的内容是否相同。这样可以保留节点的状态和避免不必要的DOM操作。  
key的工作原理如下：
1. 当Vue更新渲染真实DOM时，它会对新旧节点进行比较，找出它们之间的差异。
2. 如果两个节点具有相同的key值，则Vue认为它们是相同的节点，会尝试复用已存在的真实DOM节点。
3. 如果节点具有不同的key值，Vue会将其视为不同的节点，并进行适应的更新、移动或删除操作。

使用Key可以提供更准确的节点识别和跟踪，避免出现一些常见的问题，比如在列表中重新排序时导致的元素闪烁、输入框内容丢失等。  
key必须是唯一且稳定的，最好使用具有唯一标识的值，例如使用数据的唯一ID。同时，不推荐使用随机数作为key，因为在每次更新时都会生成新的key，导致所有节点都重新渲染，无法复用已有的节点，降低性能。
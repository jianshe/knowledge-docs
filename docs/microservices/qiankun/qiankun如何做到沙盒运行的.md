# qiankun 如何做到沙盒运行的

qiankun是一个开源的微前端框架，用于构建现代化、可维护的微前端应用。它的沙盒机制是实现微前端沙盒运行的关键部分，用于隔离不同微前端应用，防止它们相互干扰或冲突。以下是qiankun如何实现沙盒运行的关键原理：
1. 沙盒隔离：
qiankun使用浏览器提供的iframe元素来创建沙盒环境。每个微前端应用都在自己的iframe中运行，这样它们相互隔离，无法直接访问彼此的DOM和JavaScript命名空间。这有助于避免全局变量冲突和组件污染问题。
2. 共享上下文
尽管微前端应用运行在独立的沙盒中，但qiankun允许它们在需要时共享一些上下文，以实现一些共享功能。例如，它可以通过'window'上的一些属性来共享路由、状态和通信信息。
3. 子应用注册和制裁：
qiankun提供了注册和卸载子应用的机制。父应用可以在运行时动态注册和卸载子应用。当子应用被注册时，qiankun会为其创建一个独立的沙盒环境，加载子应用的代码和资源。
4. 样式隔离
qiankun通过使用Shadow DOM或CSS Modules等技术，帮助实现样式隔离，确保子应用的样式不会影响其他应用。
5. 生命周期管理
qiankun 提供了一组生命周期钩子，允许父应用控制子应用的启动、停止、卸载和更新。这有助于确保子应用能够正确地加载和卸载，以及与其他应用协同工作。

总的来说，qiankun使用iframe和一系列隔离、共享和生命周期管理机制，使不同的微前端应用能够在同一个页面上运行，而不会相互干扰或冲突。这有助于实现微前端架构，使应用更容易扩展和维护。